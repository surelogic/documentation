<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../../lib/docbook-xml-4.5/docbookx.dtd">

<sect1>
  <title>Aggregation into a Named Region</title>
  
  <para>The <classname>@UniqueInRegion</classname> field annotation is used
  to declare a unique field whose <code>Instance</code> region is aggregated 
  into a programmer declared region of the referencing object:
  
    <synopsis>
@UniqueInRegion("<co id="uir.q"/><replaceable>Q</replaceable>")
    </synopsis> 
  
    <calloutlist>
      <callout arearefs="uir.q"><para><replaceable>Q</replaceable> is a region
      of the class that declares the annotated field.</para></callout>
    </calloutlist>
  </para>
          
  <para>This annotation
  
    <itemizedlist>
      <listitem><para>Declares that the field is unique (as if it were
      annotated with <classname>@Unique</classname>).</para></listitem>

      <listitem><para>Aggregates the <code>Instance</code> region of the
      referenced object into the region <replaceable>Q</replaceable> of the
      object that contains the annotated field.</para></listitem>
      
      <listitem><para>Implies the annotation <code>@InRegion("<replaceable>Q</replaceable>")</code>
      on the field if the field is not <code>final</code>.</para></listitem>
    </itemizedlist>
  </para>
  
  <sect2>
    <title>Constraints</title>
    
    <itemizedlist>
      <listitem>
        <formalpara>
          <title>The field must have a non-primitive type</title>
        </formalpara>
      </listitem>
      
      <listitem>
        <formalpara>
          <title>If the field is <code>static</code> then region 
          <replaceable>Q</replaceable> must be <code>static</code></title>
        </formalpara>
      </listitem>
      
      <listitem>
        <formalpara>
          <title>Region <replaceable>Q</replaceable> cannot be
          <code>final</code> or <code>volatile</code></title>
        </formalpara>
      </listitem>
      
      <listitem>
        <formalpara>
          <title>Region <replaceable>Q</replaceable> must be accessible in
          the context of class containing the annotated field</title>
          
          <para>It violates abstraction to refer to private regions of the
          class's ancestors.</para>
        </formalpara>
      </listitem>
    </itemizedlist>
  </sect2>
</sect1>