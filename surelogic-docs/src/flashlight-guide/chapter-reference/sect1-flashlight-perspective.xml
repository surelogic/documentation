<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../lib/docbook-xml-4.5/docbookx.dtd">

<section id="flashlight-perspective">
	<title>The Flashlight perspective</title>

	<para>
		The
		<guilabel>Flashlight</guilabel>
		perspective organizes the Eclipse
		workbench to show views which will help you to interact with data from program
		runs.
	</para>

	<para>This perspective is useful for beginning use of the Flashlight
		tool. Its
		"canned" organization can help you to understand the capabilities of the tool.
		Advanced users may want to reconfigure the screen layout and save a
		custom
		perspective.
	</para>

	<informalfigure id="fig-flashlight-perspective">
		<mediaobject>
			<imageobject>
				<imagedata fileref="images/flashlight-perspective.png" />
			</imageobject>
		</mediaobject>
	</informalfigure>
	
	<para>Each of the views shown in the screenshot above is discussed in the following sections.  These views include
			<itemizedlist>
			  <listitem>
			    <para>The <guilabel>Flashlight Runs</guilabel> view described in <xref linkend="flashlight-runs-view" /></para>
			  </listitem>
			  <listitem>
			    <para>The <guilabel>Query Menu</guilabel> view described in <xref linkend="query-menu-view" /></para>
			  </listitem>
			  <listitem>
			    <para>The <guilabel>Query Results</guilabel> view described in <xref linkend="query-results-view" /></para>
			  </listitem>
			  <listitem>
			    <para>The <guilabel>Query Results Explorer</guilabel> view described in <xref linkend="query-results-explorer-view" /></para>
			  </listitem>
			  <listitem>
			    <para>The <guilabel>Querydoc</guilabel> view described in <xref linkend="querydoc-view" /></para>
			  </listitem>
			  <listitem>
			    <para>The <guilabel>Historical Source Snapshot</guilabel> view described in <xref linkend="historical-source-snapshot-view" /></para>
			  </listitem>
			</itemizedlist>
		</para>
		
	<section>
      <title>Switching to the Perspective</title>
      
      <para>The <guilabel>Flashlight</guilabel> perspective can be enabled
      in several ways:
        <itemizedlist>
          <listitem>
            <para>By selecting <menuchoice><guimenu>Flashlight</guimenu>
            <guimenuitem>Open Flashlight Perspective</guimenuitem></menuchoice>.
            <mediaobject>
                <imageobject>
                  <imagedata fileref="images/open-flashlight-perspective.png" />
                </imageobject>
              </mediaobject>
            </para>
          </listitem>
          
          <listitem>
            <para>By choosing to switch to the perspective when data preparation for a run completes:
              <mediaobject>
                <imageobject>
                  <imagedata fileref="images/perspective-switch.png" />
                </imageobject>
              </mediaobject>
            </para>
          </listitem>
          
          <listitem>
            <para>By selecting <menuchoice><guimenu>Window</guimenu>
            <guisubmenu>Open Perspective</guisubmenu>
            <guimenuitem>Other&hellip;</guimenuitem></menuchoice>, and
            then choosing <guilabel>Flashlight</guilabel> from
            the <guilabel>Open Perspective</guilabel> dialog box.  Or by
            using any other standard Eclipse mechanism to switch
            perspectives, such as clicking the the perspective&rsquo;s
            icon (<guiicon><inlinegraphic
            fileref="images/fl_logo.png"/></guiicon>) in the shortcut
            bar.</para>
          </listitem>          
        </itemizedlist>
      </para>
    </section>
		

		<section id="flashlight-runs-view">
			<title>The Flashlight Runs view</title>
			<para>
				The
				<guilabel>Flashlight Runs</guilabel>
				view lists information about
				all of the completed runs of programs launched from the Flashlight
				launch tab. An example of this view is shown in <xref linkend="fig-flashlight-runs-view"/>.
				This view only shows runs that have <emphasis>completed their execution</emphasis>. To examine
				runs that are still running, and were been launched within Eclipse, you
				use the <guilabel>Launched Run Control</guilabel>
				dialog as described in <xref linkend="flashlight-launched-run-control-dialog" /></para>

				<figure id="fig-flashlight-runs-view">
					<title>The <guilabel>Flashlight Runs</guilabel> view</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/flashlight-runs-view.png" />
						</imageobject>
					</mediaobject>
				</figure>

			<para>The list below describes each column of the table that appears in this view.</para>

				<itemizedlist>
					<listitem>
						<formalpara>
							<title>Size</title>
							<para>The size of the the run and its current state.
							The size is of the disk space being used by the run. The state of the
							run is indicated by the icon displayed in this column. There are three icons
							<itemizedlist>
								<listitem>
									<para><guiicon><inlinegraphic  fileref="images/drum.png" /></guiicon> &ndash; The run
									has finished and its data is prepared for querying. Selecting this run will populate
									the <guilabel>Query Menu</guilabel> with queries and the <guilabel>Query Results</guilabel>
									view with good and bad news about the run.</para>
								</listitem>
								<listitem>
									<para><guiicon><inlinegraphic  fileref="images/refresh.gif" /></guiicon> &ndash; The
									run has completed data collection and is in the process of being prepared for querying.</para>
								</listitem>
								<listitem>
									<para><guiicon><inlinegraphic  fileref="images/file.gif" /></guiicon> &ndash; The run
									has completed data collection but has not started data preparation or its prepared data
									has been manually been deleted from the disk. Selecting this run will allow you to prepare
									it for querying (so will a double-click on the run).</para>
								</listitem>
							</itemizedlist>
							</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>Run</title>
							<para>The name of the program run. This is the same name that you
								see when launching a program from the Flashlight launch
								tab. The icon indicates what type of program the run represents. There are two icons
								<itemizedlist>
								<listitem>
									<para><guiicon><inlinegraphic  fileref="images/java_app.gif" /></guiicon> &ndash; The run
									is from a Java desktop or server application.</para>
								</listitem>
								<listitem>
									<para><guiicon><inlinegraphic  fileref="images/android_app.gif" /></guiicon> &ndash; The
									run is from an Android application launched on a phone, tablet, or emulator.</para>
								</listitem>
							    </itemizedlist>
							</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>Time</title>
							<para>The time the program was launched.</para>
						</formalpara>
					</listitem>
					
					<listitem>
						<formalpara>
							<title>Duration</title>
							<para>The duration of the program execution.</para>
						</formalpara>
					</listitem>
					
					<listitem>
						<formalpara>
							<title>Processors</title>
							<para>The number of CPU's that the JVM ran on when this program
								was executed.
							</para>
						</formalpara>
					</listitem>
					
					<listitem>
						<formalpara>
							<title>Max Memory</title>
							<para>The maximum amount of computer memory allotted to the
								program.
							</para>
						</formalpara>
					</listitem>
					
					<listitem>
						<formalpara>
							<title>Java</title>
							<para>The version of the JVM that ran the program.</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>Java Vendor</title>
							<para>The JVM vendor.</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>OS</title>
							<para>The operating system the program ran under.</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>Host</title>
							<para>The hostname of the computer the program ran on.</para>
						</formalpara>
					</listitem>

					<listitem>
						<formalpara>
							<title>By</title>
							<para>The user the program ran under.</para>
						</formalpara>
					</listitem>
				</itemizedlist>
			
	 <figure id="fig-flashlight-runs-view-toolbar">
        <title>The <guilabel>Flashlight Runs</guilabel> view toolbar</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/flashlight-runs-view-toolbar.png"/></imageobject>
        </mediaobject>
      </figure>
			
			<para>The view&rsquo;s toolbar has two command icons; see <xref
      linkend="fig-flashlight-runs-view-toolbar"/>.
        <itemizedlist>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/fl_run_control.gif"/></guiicon></title>
              <para>This button opens the <guilabel>Launched Run Control</guilabel> dialog. This dialog, which
              lists still running Flashlight-instrumented programs, is described
              in <xref linkend="flashlight-launched-run-control-dialog" />.</para>
            </formalpara>            
          </listitem>
          
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/refresh.gif"/></guiicon></title>
              <para>This button scans the disk and refreshes the list of completed Flashlight runs. This can be
              useful if an Ant scan was added to the Flashlight scan directory.</para>
            </formalpara>            
          </listitem>
        </itemizedlist>
      </para>
      
       <figure id="fig-flashlight-runs-view-menu">
        <title>The <guilabel>Flashlight Runs</guilabel> view menu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/flashlight-runs-view-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
      <para>The view&rsquo;s menu has six commands; see <xref
      linkend="fig-flashlight-runs-view-menu"/>.
      	<itemizedlist>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/fl_prep_data.gif"/> Prepare</guiicon></title>
		    <para>Selecting this menu item causes selected runs to be prepared for querying. If the run has already been prepared,
		    the prepared data is deleted and prepared again from the "raw" collected run data.</para>
		  </formalpara>
		</listitem>
	    <listitem>
	      <formalpara>
	        <title><guiicon><inlinegraphic fileref="images/file.gif"/> Show Log</guiicon></title>
	        <para>This button opens a dialog that shows the log for the run. This includes information about the instrumentation,
	        execution, and data preparation. An example of the dialog is shown in the image below.
	        <mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-runs-view-log-dialog.png" />
				</imageobject>
			</mediaobject>
	        </para>
	      </formalpara>            
	     </listitem>
	     <listitem>
	      <formalpara>
	        <title><guiicon><inlinegraphic fileref="images/file.gif"/> Infer JSure Annotations...</guiicon></title>
	        <para>Selecting this menu item opens a dialog that allows the user to infer JSure annotations for
             a project, based on a completed Flashlight run.  For more information
             see <xref linkend="flashlight-promises-inference" />.</para>
	      </formalpara>            
	     </listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/red_x.gif"/> Delete</guiicon></title>
		    <para>Selecting this menu item deletes the selected runs from the disk.</para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/fl_run_control.gif"/> Run Control</guiicon></title>
		    <para>Selecting this menu item opens the <guilabel>Flashlight Launched Run Control</guilabel> dialog. This
            dialog lists all instrumented programs launched during this Eclipse session. It allows
            collection of data to be stopped at any time.</para>
		  </formalpara>
		</listitem>
				<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/refresh.gif"/> Refresh</guiicon></title>
		    <para>Selecting this menu item scans from the disk and shows updates the view contents to reflect the
		    current disk state. This is useful if runs are manually deleted or Ant runs are manually copied into the
		    run directory.</para>
		  </formalpara>
		</listitem>
	    </itemizedlist>
      </para>
      
      <figure id="fig-flashlight-runs-view-context-menu">
        <title>The <guilabel>Flashlight Runs</guilabel> view context menu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/flashlight-runs-view-context-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
    <para>The view&rsquo;s context menu has five commands; see <xref linkend="fig-flashlight-runs-view-context-menu"/>.
    These commands match the view menu commands described above.</para>  
    </section>    


	<section id="query-menu-view">
		<title>The Query Menu view</title>
		
		<para>The <guilabel>Query Menu</guilabel> view lists the queries that you can do on a Flashlight run.
		An example of this view is shown in <xref linkend="fig-query-menu-view"/>. At the top level
        these queries are categorized to help you determine what results are of interest to you. These categories can be seen in the image
        below. If you have selected a particular result in the <guilabel>Query Results</guilabel> view then the <guilabel>Query Menu</guilabel> view lists
        the possible "drill-in" queries, which we also call sub-queries, you can invoke.</para>
		
		<figure id="fig-query-menu-view">
			<title>The <guilabel>Query Menu</guilabel> view</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/query-menu-view.png" />
				</imageobject>
			</mediaobject>
		</figure>
		
		<para>During data preparation Flashlight checks if each top-level query has results. Normally queries with empty results are
		not shown in the menu (however a setting below can change this and shown them in gray). If, however, all queries in a section are empty then a message
		is shown for that category to inform the user of this situation. In <xref linkend="fig-query-menu-view"/> this is the
		case for the <guilabel>API Use</guilabel> category at the bottom of the view.</para>
		
	 <figure id="fig-query-menu-view-toolbar">
        <title>The <guilabel>Query Menu</guilabel> view toolbar</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-menu-view-toolbar.png"/></imageobject>
        </mediaobject>
      </figure>
			
			<para>The view&rsquo;s toolbar has one command icon; see <xref
      linkend="fig-query-menu-view-toolbar"/>.
        <itemizedlist>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/query_back.gif"/></guiicon></title>
              <para>This button brings the query menu back up to the top level for the currently selected run.
              It keeps all previous query results.</para>
            </formalpara>            
          </listitem>
        </itemizedlist>
      </para>
	
	  <figure id="fig-query-menu-view-menu">
        <title>The <guilabel>Query Menu</guilabel> view menu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-menu-view-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
      <para>The view&rsquo;s menu has three commands; see <xref
      linkend="fig-query-menu-view-menu"/>.
      	<itemizedlist>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/query_back.gif"/> Back to Top-Level Queries</guiicon></title>
		    <para>Selecting this menu item brings the query menu back up to the top level for the currently selected run.
              It keeps all previous query results.</para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon>Show Empty Queries</guiicon></title>
		    <para>Checking this menu item causes empty queries at the top level of the query menu to be shown in gray.
		    If it is not checked these queries are not shown in the view. All the grey queries listed in the menu below can
		    be run, but will result in no row of data returned.
		     <mediaobject>
				<imageobject>
					<imagedata fileref="images/query-menu-view-empty-queries.png" />
				</imageobject>
			</mediaobject>
			This preference is for advanced users and developers. It is rarely useful for normal tool use.
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon>Show Unrunnable Queries</guiicon></title>
		    <para>Checking this menu item causes unrunnable sub-queries to be shown in gray.
		    If it is not checked these queries are not shown in the view. The grey sub-query in the image below
		    cannot be run for the selected row in the <guilabel>Query Results</guilabel> view.
		     <mediaobject>
				<imageobject>
					<imagedata fileref="images/query-menu-view-unrunnable.png" />
				</imageobject>
			</mediaobject>
			This preference is for advanced users and developers. It is rarely useful for normal tool use.
			This preference also shows unrunnable queries in the context menu of the <guilabel>Query Results</guilabel> view.
		    </para>
		  </formalpara>
		</listitem>
	</itemizedlist>
	</para>
	
	  <figure id="fig-query-menu-view-context-menu">
        <title>The <guilabel>Query Menu</guilabel> view context menu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-menu-view-context-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
    <para>The view&rsquo;s context menu has two commands; see <xref linkend="fig-query-menu-view-context-menu"/>.
    <itemizedlist>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/run_drum.gif"/> Run</guiicon></title>
		    <para>Selecting this menu item causes selected query to be invoked and its results displayed to the tool user.
		    A double-click can also be used to invoke a query.</para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/doc.gif"/> Show Querydoc</guiicon></title>
		    <para>Selecting this menu item causes the documentation for the selected
		    query to be shown in the <guilabel>Querydoc</guilabel> view. Also, selecting the query with the mouse
		    causes its documentation to appear in the <guilabel>Querydoc</guilabel> view. The <guilabel>Querydoc</guilabel> view
		    is described in <xref linkend="querydoc-view"/>.</para>
		  </formalpara>
		</listitem>
	</itemizedlist>
    </para>  
	</section>


	<section id="query-results-view">
		<title>The Query Results view</title>
				
	 <para>The <guilabel>Query Results</guilabel> view shows either (a) an overview of news about the run
      currently selected in the <guilabel>Flashlight Runs</guilabel> view or (b) query results as
      a table, tree or tree-table. We now consider examples of both.</para>
      
     <figure id="fig-query-results-view-news">
			<title>The <guilabel>Query Results</guilabel> view showing good and bad news about a run</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/query-results-view-news.png" />
				</imageobject>
			</mediaobject>
		</figure>
      
      <para><emphasis>Showing good and bad news about a run:</emphasis> An example of news about a run
      is shown in <xref linkend="fig-query-results-view-news"/>.
      In this mode the view lists good and bad
      news about the selected run. These news items are not definitive, because they represent
      information from a single run of the program&mdash;hence the name <emphasis>news</emphasis> instead of <emphasis>results</emphasis>.
      Some news items are underlined. These underlined news items may be selected with the mouse to invoke a query and show the
      news item's corresponding results. Some news items are not underlined because they indicate that no information was
      observed during the run&mdash;in these cases no results indicates something newsworthy. These items that are not
      underlined have no associated results.</para>
      
      <para>The "news" version of this view is only shown if a run is selected and no query result about that run is selected.
      If a query has been run the view shows the results of the query.</para>
      
		<figure id="fig-query-results-view-results">
			<title>The <guilabel>Query Results</guilabel> view showing query results and allowing sub-queries on a selected row</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/query-results-view-results.png" />
				</imageobject>
			</mediaobject>
		</figure>
		
     <para><emphasis>Showing results and allowing "drill-in" queries:</emphasis> When results are shown in the <guilabel>Query Results</guilabel> view you can select a row and "drill-in" to a particular row of the
      result that is of interest.
      An example of news about a run
      is shown in <xref linkend="fig-query-results-view-results"/>.
       Hence, you can run queries based upon the results of previous queries. This "drill-in" tree of queries is
      tracked in the <guilabel>Query Results Explorer</guilabel> view.  You can move up and down within
      a particular "drill-in" tree of query results by using the forward and back arrows in the toolbar of both results views or by selecting
      a particular result in the <guilabel>Query Results Explorer</guilabel> view. To run a "drill-in" query you bring up the context menu for
      the selected result in the <guilabel>Query Results</guilabel> view (for example, using a right-click of the mouse) or double-click that query
      in the <guilabel>Query Menu</guilabel> view.</para>
		

		<para>
			The result of a query is displayed as either a tree, table, or
			tree-table, depending on the specific query.
			<xref linkend="query-reference" />
			describes the different queries and the
			shapes of their results.
		</para>


	 <figure id="fig-query-results-view-toolbar">
        <title>The <guilabel>Query Results</guilabel> view toolbar</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-results-view-toolbar.png"/></imageobject>
        </mediaobject>
      </figure>
			
			<para>The view&rsquo;s toolbar has five command icons; see <xref
      linkend="fig-query-menu-view-toolbar"/>.
        <itemizedlist>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/collapse_all.gif"/></guiicon></title>
              <para>This button collapses all opened nodes in a tree or tree-table query result.</para>
            </formalpara>            
          </listitem>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/left.gif"/></guiicon></title>
              <para>This button changes the selected query to the immediate parent query of the currently selected query.
              The tree of queries that has been run by the user is shown in the <guilabel>Query Results Explorer</guilabel> view.</para>
            </formalpara>            
          </listitem>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/right.gif"/></guiicon></title>
              <para>This button changes the selected query to the first child query of the currently selected query.
              The tree of queries that has been run by the user is shown in the <guilabel>Query Results Explorer</guilabel> view.</para>
            </formalpara>            
          </listitem>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/gray_x.png"/></guiicon></title>
              <para>This button removes the selected query from this view and the <guilabel>Query Results Explorer</guilabel> view.
              If the query has any child sub-queries they are removed as well. The immediate parent query of the
              removed query, if one exists, becomes the selected query.</para>
            </formalpara>            
          </listitem>
          <listitem>
            <formalpara>
              <title><guiicon><inlinegraphic fileref="images/gray_x_double.png"/></guiicon></title>
              <para>This button removes all queries the user has run from this view and the <guilabel>Query Results Explorer</guilabel> view.
              The tree of queries that has been run by the user is shown in the <guilabel>Query Results Explorer</guilabel> view.</para>
            </formalpara>            
          </listitem>
        </itemizedlist>
      </para>
	
	  <figure id="fig-query-results-view-menu">
        <title>The <guilabel>Query Results</guilabel> view menu</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-results-view-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
      <para>The view&rsquo;s menu has six commands; see <xref
      linkend="fig-query-results-view-menu"/>.
      	<itemizedlist>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/info.gif"/> Show Defined Variable Values...</guiicon></title>
		    <para>Selecting this menu item brings up a dialog that shows variables that defined the context of query result
		    being shown in the view. Selecting rows defines variables that are used to set a context of each sub-query. As
		    the user drills-in to the collected results more and more variables are used to define the context. The dialog lists
		    the variable names and their values.
		    <mediaobject>
				<imageobject>
					<imagedata fileref="images/query-results-view-variables-dialog.png" />
				</imageobject>
			</mediaobject>
			This menu item is for advanced users and developers. It is rarely useful for normal tool use.
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/file.gif"/> Show SQL...</guiicon></title>
		    <para>Selecting this menu item brings up the SQL query run on the database who's results are being displayed in this
		    view. The dialog shows the SQL query with all variable value substitution completed (the original query may be examined
		    in the <guilabel>Query Editor</guilabel>).
		     <mediaobject>
				<imageobject>
					<imagedata fileref="images/query-results-view-sql-dialog.png" />
				</imageobject>
			</mediaobject>
			This menu item is for advanced users and developers. It is rarely useful for normal tool use.
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/export.gif"/> Export...</guiicon></title>
		    <para>Selecting this menu item allows you to export the current query results to a file. A dialog
		    comes up that lets you select the desired output format.
		    <mediaobject>
				<imageobject>
					<imagedata fileref="images/query-results-view-export-dialog.png" />
				</imageobject>
			</mediaobject>
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/query_back.gif"/> Back to Top-Level Queries</guiicon></title>
		    <para>This button brings the query menu back up to the top level for the currently selected run.
              It keeps all previous query results.
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/gray_x.png"/> Remove</guiicon></title>
		    <para>Selecting this menu item removes the selected query from this view and the <guilabel>Query Results Explorer</guilabel> view.
              If the query has any child sub-queries they are removed as well. The immediate parent query of the
              removed query, if one exists, becomes the selected query.
		    </para>
		  </formalpara>
		</listitem>
		<listitem>
		  <formalpara>
		    <title><guiicon><inlinegraphic fileref="images/gray_x_double.png"/> Remove All</guiicon></title>
		    <para>Selecting this menu item removes all queries the user has run from this view and the <guilabel>Query Results Explorer</guilabel> view.
              The tree of queries that has been run by the user is shown in the <guilabel>Query Results Explorer</guilabel> view.
		    </para>
		  </formalpara>
		</listitem>
	</itemizedlist>
	</para>
	
	  <figure id="fig-query-results-view-context-menu">
        <title>The <guilabel>Query Results</guilabel> view context menu lists "drill-in" queries that can be run on a selected row</title>
        <mediaobject>
          <imageobject><imagedata fileref="images/query-results-view-context-menu.png"/></imageobject>
        </mediaobject>
      </figure>
      
    <para>The view&rsquo;s context menu lists "drill-in" or sub-queries that can be run
    on a selected result row; see <xref linkend="fig-query-results-view-context-menu"/>.
    The particular list of sub-queries is dependent upon the result that is selected. The query
    in the menu that is decorated with a <guiicon><inlinegraphic fileref="images/asterisk.gif"/></guiicon> is
    called the <emphasis>default query</emphasis> and can be run using a double-click on the row. For example,
    in <xref linkend="fig-query-results-view-context-menu"/> the default query is <emphasis>What fields
    are protected by this lock, and how often?</emphasis>
    </para>  
	</section>
	
	<section id="query-results-explorer-view">
		<title>Query Results Explorer</title>
		<para>
			This view allows you to select any of the queries run previously
			during the session and display it in the
			<guilabel>Query
				Results
			</guilabel>
			view. You can also delete any or all of the
			results from here.
		</para>
		<informalfigure id="fig-flashlight-query-results-explorer-view">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-query-results-explorer-view.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
	</section>

	<section id="querydoc-view">
		<title>The Querydoc view</title>
		<para>TODO</para>

	</section>
	
	<section id="historical-source-snapshot-view">
		<title>Historical Source Snapshot</title>
		<para>
			When a Flashlight run is performed, a snapshot of the project source
			code is collected. This view shows the source code as it appeared
			when
			the run was actually performed.
		</para>
		<informalfigure id="fig-flashlight-historical-source-view">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-historical-source-view.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
	</section>

	<section id="flashlight-launched-run-control-dialog">
		<title>Launched Run Control Dialog</title>
		<para>This section describes the Flashlight Launched Run Control
			dialog. This dialog
			automatically appears when an instrumented program is launched in Eclipse.
			It tracks the program run from launch, execution, termination, and data
			preparation. It can be though of as being similar to a web
            browser download monitor dialog. The image below shows an example of this dialog.
		</para>

		<informalfigure id="fig-flashlight-launched-run-control">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-launched-run-control.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
		
		<para>In the example above three instrumented launches are being tracked. The
		<guilabel>PlayerUI</guilabel> run has launched and is collecting data. The
		<guilabel>ChatTestClient</guilabel> and <guilabel>Server</guilabel> runs
		have finished collecting data and are having their data prepared for querying.
		The progress of data preparation is tracked in this dialog.</para>
		
		<para>It is possible to stop data collection and disconnect Flashlight from the
        running application by pressing the <guiicon><inlinegraphic
        fileref="images/red_x.gif" /></guiicon> icon to the far right of each dialog entry.
        When the application completes or Flashlight is disconnected from the
        running application.</para>
        
        <informalfigure id="fig-flashlight-launched-run-control-stop-collection">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-launched-run-control-stop-collection.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
        
        <para>It is also possible to filter the list of launches shown by typing text
        into the box at the lower-right of the dialog. For example if "Play" is typed
        into the filter box then all other launches except those that begin with
        <guilabel>Play</guilabel> will be filtered out. This is shown in the image below.</para>
        
        <informalfigure id="fig-flashlight-launched-run-control-filter">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-launched-run-control-filter.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
		
		<para>To clear any filter you can either erase the text using backspace
		/ delete or press the <guiicon><inlinegraphic
        fileref="images/gray_x.png" /></guiicon> (which will erase the text all at once)</para>
        
        <para>There are two ways remove runs from the dialog that are ready for the user to query.
        First, you can clear an individual run by pressing the <guiicon><inlinegraphic
        fileref="images/gray_x.png" /></guiicon> to its right. Second, you can press the <guibutton>Clear List</guibutton>
        button to the lower-left of the dialog. The <guibutton>Clear List</guibutton>
        button clears all runs from the list that have completed data preparation.  These two approaches are highlighted
        in the image below.</para>
        
        <informalfigure id="fig-flashlight-launched-run-control-clear">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-launched-run-control-clear.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
		
		<para>We finish this section by noting that it is possible to bring up the <guilabel>Launched Run Control</guilabel>
		dialog at any time using the <guimenu>Flashlight</guimenu> menu.  This is done by selecting the <guilabel>Launched Run Control...</guilabel>
		menu item as shown below.</para>

        <informalfigure id="fig-flashlight-launched-run-control-open">
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/flashlight-launched-run-control-open.png" />
				</imageobject>
			</mediaobject>
		</informalfigure>
        
	</section>
</section>



