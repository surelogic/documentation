<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../lib/docbook-xml-4.5/docbookx.dtd">

<sect1 id="quick-start">
  <title>Quick start: How to instrument your code and query Flashlight</title>

  <para>This section assumes that you have installed Flashlight. If you see a
  <guimenu>Flashlight</guimenu> menu item on your Eclipse main menu then you can
  assume Flashlight has been properly installed.</para>

  <para>You need to install a license to use Flashlight.  If you do not have a
  license file visit <ulink
  url="http://www.surelogic.com">http://www.surelogic.com</ulink> to obtain one.
  To install the license select <guimenuitem>Manage SureLogic
  Licenses</guimenuitem> from the <guimenu>Flashlight</guimenu> menu as shown in
  <xref linkend="fig-quick-start-license-menu" />.</para>

  <figure id="fig-quick-start-license-menu">
    <title>The menu option to install a license for Flashlight</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-license-menu.png" />
      </imageobject>
    </mediaobject>
  </figure>

  <para> This will cause the <guilabel>Manage SureLogic Licenses</guilabel> to
  appear as shown in <xref linkend="fig-quick-start-license-dialog-empty"
  />. Highlight the Flashlight row and select the <guibutton>Install
  License</guibutton> button to install your license file.</para>

  <figure id="fig-quick-start-license-dialog-empty">
    <title>The SureLogic license management dialog</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-license-dialog-empty.png" />
      </imageobject>
    </mediaobject>
  </figure>

  <para>Flashlight will not disrupt your Eclipse installation if a license for
  it is not installed, however, it will not allow you to use Flashlight
  functionality.  We will assume from this point on that you have installed your
  license.</para>

  <para>Flashlight is a dynamic analysis tool which means that you have to run
  your program to use it.  Flashlight instruments your program when it starts up
  and uses that instrumentation to collect data about your program.  By default,
  data resides in your workspace under a directory named
  <filename>.flashlight-data</filename>.</para>
  
  <para>To run your program with Flashlight instrumentation is similar to launching it
  normally in the Eclipse IDE. There are three ways to do this which we illustrate below
  using the <emphasis>ChatTestClient</emphasis> Java program (from a tutorial).</para>

	<itemizedlist>
		<listitem>
			<para>Using the Flashlight menu as shown in
			<xref linkend="fig-quick-start-launch-main-menu" />.</para>
		</listitem>
		<listitem>
			<para>Using the Flashlight quick launch icon in the Eclipse toolbar as shown in
			<xref linkend="fig-quick-start-launch-toolbar" />.</para>
		</listitem>
		<listitem>
			<para>Using the context menu of a launchable Java file as shown in
			<xref linkend="fig-quick-start-launch-context" />.</para>
		</listitem>
	</itemizedlist>
  
  <figure id="fig-quick-start-launch-main-menu">
    <title>Launching an instrumented Java program from the Flashlight menu</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-launch-main-menu.png" />
      </imageobject>
    </mediaobject>
  </figure>
  
  <figure id="fig-quick-start-launch-toolbar">
    <title>Launching an instrumented Java program from the Eclipse quick launch toolbar</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-launch-toolbar.png" />
      </imageobject>
    </mediaobject>
  </figure>
  
  <figure id="fig-quick-start-launch-context">
    <title>Launching an instrumented Java program from the file context menu</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-launch-context.png" />
      </imageobject>
    </mediaobject>
  </figure>
  
  <para>To obtain useful information about your program from the tool you should
  exercise it in a realistic manner. Typically, long program runs are not required,
  however simply running unit test code or isolated cases can create poor data. Try
  to run you program in a manner were its concurrency is exercised to the fullest
  extent possible.</para>
  
  <para>When your program launches the <guilabel>Flashlight Launched Run Control Dialog</guilabel> appears. An
  example of this dialog is shown in <xref linkend="fig-quick-start-launched-run-control" />. Each
  running Flashlight-instrumented program gets a listing in this dialog&mdash;it can be though of as being similar to a web
  browser download monitor dialog.</para>
  
  <figure id="fig-quick-start-launched-run-control">
    <title>Dialog that shows the state of all running Flashlight-instrumented applications</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-launched-run-control.png" />
      </imageobject>
    </mediaobject>
  </figure>
  
  <para>It is possible to stop data collection and disconnect Flashlight from the
  running application by pressing the <guiicon><inlinegraphic
  fileref="images/red_x.gif" /></guiicon> icon to the far right of each dialog entry.
  When the application completes or Flashlight is disconnected from the running application. The collected data is prepared for querying by the tool. Data
  preparation may take some time and its progress is reported in the <guilabel>Flashlight
  Launched Run Control Dialog</guilabel> as shown in <xref linkend="fig-quick-start-launched-run-control-prep" />.</para>
  
  <figure id="fig-quick-start-launched-run-control-prep">
    <title>Showing the progress of collected data preparation for querying by the user</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-launched-run-control-prep.png" />
      </imageobject>
    </mediaobject>
  </figure>
  
  <para>When data is prepared querying is done in a special Eclipse perspective called the
  <guilabel>Flashlight</guilabel> perspective.  If data preparation of any run completes and Eclipse is not currently
  in the Flashlight perspective. The tool prompts the user to change to this perspective. This prompt is shown
  in <xref linkend="fig-quick-start-switch-to-fl-persp" />.</para>

  <figure id="fig-quick-start-switch-to-fl-persp">
    <title>Dialog asking to change Eclipse to the Flashlight perspective</title>
    <mediaobject>
      <imageobject>
        <imagedata fileref="images/quick-start-switch-to-fl-persp.png" />
      </imageobject>
    </mediaobject>
  </figure>

</sect1>
