<?xml version="1.0" encoding="UTF-8"?>
<project name="sierra_help_manual" basedir="." default="all">
	<import file="./definitions.xml" />

	<target name="all" depends="sierra-guide, flashlight-guide" />

	<target name="sierra-guide" depends="sierra-guide-html,sierra-guide-eclipse-help" />

	<target name="sierra-guide-html">
		<mkdir dir="${sg.html.dir}" />
		<java classname="${xslt.processor.class}" fork="yes" dir="${sg.html.dir}" failonerror="true">
			<classpath refid="xslt.processor.classpath" />
			<arg line="-o '${sg.html.file}'" />
			<arg line="-l" />
			<arg line="-x org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-y org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-r org.apache.xml.resolver.tools.CatalogResolver " />
			<arg line="'${sg.source.file}' '${docbook.dir}/html/docbook.xsl'" />
		</java>
		<copy todir="${sg.html.dir}">
			<fileset dir="${sg.source.dir}">
				<include name="**/*.png" />
			</fileset>
		</copy>
	</target>

	<target name="sierra-guide-eclipse-help">
		<mkdir dir="${sg.eclipse.help.dir}" />
		<java classname="${xslt.processor.class}" fork="yes" dir="${sg.eclipse.help.dir}" failonerror="true">
			<classpath refid="xslt.processor.classpath" />
			<arg line="-l" />
			<arg line="-x org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-y org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-r org.apache.xml.resolver.tools.CatalogResolver " />
			<arg line="'${sg.source.file}' '${docbook.dir}/eclipse/eclipse.xsl'" />
			<arg line="eclipse.plugin.name='Sierra Eclipse Client Help'" />
			<arg line="eclipse.plugin.id=com.surelogic.sierra.eclipse.client.help" />
			<arg line="eclipse.plugin.provider='SureLogic, Inc.'" />
		</java>
		<copy todir="${sg.eclipse.help.dir}">
			<fileset dir="${sg.source.dir}">
				<include name="**/*.png" />
			</fileset>
		</copy>
	</target>

	<target name="flashlight-guide" depends="flashlight-guide-html,flashlight-guide-eclipse-help" />

	<target name="flashlight-guide-html">
		<mkdir dir="${fg.html.dir}" />
		<java classname="${xslt.processor.class}" fork="yes" dir="${fg.html.dir}" failonerror="true">
			<classpath refid="xslt.processor.classpath" />
			<arg line="-o '${fg.html.file}'" />
			<arg line="-l" />
			<arg line="-x org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-y org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-r org.apache.xml.resolver.tools.CatalogResolver " />
			<arg line="'${fg.source.file}' '${docbook.dir}/html/docbook.xsl'" />
		</java>
		<copy todir="${fg.html.dir}">
			<fileset dir="${fg.source.dir}">
				<include name="**/*.png" />
			</fileset>
		</copy>
	</target>

	<target name="flashlight-guide-eclipse-help">
		<mkdir dir="${fg.eclipse.help.dir}" />
		<java classname="${xslt.processor.class}" fork="yes" dir="${fg.eclipse.help.dir}" failonerror="true">
			<classpath refid="xslt.processor.classpath" />
			<arg line="-l" />
			<arg line="-x org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-y org.apache.xml.resolver.tools.ResolvingXMLReader" />
			<arg line="-r org.apache.xml.resolver.tools.CatalogResolver " />
			<arg line="'${fg.source.file}' '${docbook.dir}/eclipse/eclipse.xsl'" />
			<arg line="eclipse.plugin.name='Flashlight Eclipse Client Help'" />
			<arg line="eclipse.plugin.id=com.surelogic.flashlight.eclipse.client.help" />
			<arg line="eclipse.plugin.provider='SureLogic, Inc.'" />
		</java>
		<copy todir="${fg.eclipse.help.dir}">
			<fileset dir="${fg.source.dir}">
				<include name="**/*.png" />
			</fileset>
		</copy>
	</target>

</project>