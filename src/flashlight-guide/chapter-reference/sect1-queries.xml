<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../lib/docbook-xml-4.5/docbookx.dtd">

<sect1 id="query-reference">
  <title>Queries</title>
  <para>
    Flashlight ships with a large number of queries accessible through the
    Flashlight perspective.  This section documents the content and format of
    each query.  For more information about how to use the Flashlight
    perspective, see <xref linkend="flashlight-perspective" />.  For a tutorial
    on how to use the provided queries effectively, see <xref
    linkend="sec-tutorial" />.
  </para>
  
  <sect2 id="query-reference-identifiers">
    <title>Identifiers</title>
    
    <para>
      The Flashlight queries identify declared and run-time Java entities using the 
      following conventions:
      
      <itemizedlist>
        <listitem>
          <formalpara>
            <title>Packages</title>
            
            <para>Packages are referred to exactly as they are declared
            in a Java source file.  The default unnamed package is referred to as
            <package>(default)</package>.</para>
          </formalpara>
        </listitem>
        
        <listitem>
          <formalpara>
            <title>Classes</title>
            
            <para>Classes are referred to using their unqualified name, based on
            the name of the classfile generated by the Java compiler.
            More specifically, top-level Java classes
            are referred to just as they appear in the class
            declaration.  Nested types are
            prefixed by their parent class name and the <literal>$</literal>
            character.  Anonymous classes are numbered in the order they
            appear in the declaring file.  As an example, the
            following compilation unit declares three classes:
            <classname>Foo</classname>, <classname>Foo$Bar</classname>,
            and <classname>Foo$1</classname>, all of them in package
            <package>(default)</package>.
	
<programlisting><![CDATA[import java.util.Comparator;

public class Foo {
	static class Bar {
	}
	Comparator<String> baz = new Comparator<String>() {
		@Override
		public int compare(String o1, String o2) {
			return o1.compareTo(o2);
		}
	};
}]]></programlisting>
            </para>
          </formalpara>
        </listitem>
        
        <listitem>
          <formalpara>
            <title>Objects and Locks</title>
            
            <para>Every object created in an instrumented Java program is
            assigned a numeric identifier which is used to refer to it
            for the duration of the program. In query results, objects
            are referred to using their numeric identifier prefixed by
            their class name.  For example, if the
            <classname>Comparator</classname> in the above listing of
            code was assigned the number 5, then the object would be
            referrenced as <varname>Foo$1-5</varname>.  Because locks
            are just regular Java objects, Flashlight refers to locks
            using their object identifiers.</para>
          </formalpara>
        </listitem>
        
        <listitem>
          <formalpara>
            <title>Threads</title>
            
            <para>Threads are referred to by their name, as returned by
            <function>Thread.getName()</function>.</para>
          </formalpara>
        </listitem>
        
        <listitem>
          <formalpara>
            <title>Methods</title>
            
            <para>Methods are referred to by their declared name. 
            Flashlight also displays object and class initializers as
            methods in stack traces and the like.  Constructors are named
            <function>&lt;init&gt;</function>; class initializers are named
            <function>&lt;clinit&gt;</function>.</para>
          </formalpara>
        </listitem>
      </itemizedlist>
    </para>
  </sect2>
  
  <sect2>
    <title>Reference</title>
    <qandaset defaultlabel="none" >
      <qandaentry>
	<question>
	  <para>
	    How often is a lock held when this field is accessed?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists how often each lock was held when this particular field was
	    accessed, as well as what proportion of the total number of field
	    accesses that represents.  If the same lock is held on every access,
	    we have an assurance that no race condition was observed for this
	    field.
	  </para>
	  
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="3"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock</entry>
		  <entry>A lock identifier</entry>
		</row>

		<row>
		  <entry>Times Acquired</entry>
		  <entry>The number of times this lock was acquired and held
		  while this field was accessed</entry>
		</row>

		<row>
		  <entry>Field Access Count</entry>
		  <entry>The number of times this field was accessed</entry>
		</row>

		<row>
		  <entry>Percentage Held</entry>
		  <entry>The proportion of times a lock was held when this field
		  was accessed to the total number of accesses, expressed as a
		  percentage</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	  
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    How often is a lock held when this field is accessed after object construction?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists how often each lock was held when this particular field was
	    accessed after the object was fully constructed.  If the same lock
	    is held on every access, we have an assurance that no race condition
	    was observed for this field.  This is generally the more useful form
	    of this query, as a safely published field usually doesn't need to
	    have the same lock held during object construction as is held when
	    it is accessed.
	  </para>	 
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="3"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock</entry>
		  <entry>A lock identifier</entry>
		</row>

		<row>
		  <entry>Times Acquired</entry>
		  <entry>The number of times this lock was acquired and held
		  while this field was accessed</entry>
		</row>

		<row>
		  <entry>Field Access Count</entry>
		  <entry>The number of times this field was accessed</entry>
		</row>

		<row>
		  <entry>Percentage Held</entry>
		  <entry>The proportion of times a lock was held when this field
		  was accessed to the total number of accesses, expressed as a
		  percentage</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    How often is a lock held when this object is indirectly accessed?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists how often each lock was held when a particular object was
	    indirectly accessed, as well as what proportion of the total number
	    of accesses that represents.
	  </para>	  
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="3"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock</entry>
		  <entry>A lock identifier</entry>
		</row>

		<row>
		  <entry>Times Acquired</entry>
		  <entry>The number of times this lock was acquired and held
		  while this object was indirectly accessed</entry>
		</row>

		<row>
		  <entry>Access Count</entry>
		  <entry>The number of times this object was indirectly
		  accessed</entry>
		</row>

		<row>
		  <entry>Percentage Held</entry>
		  <entry>The proportion of times a lock was held when this
		  object was indirectly accessed to the total number of
		  accesses, expressed as a percentage</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What are the improperly published instances of this non-static field?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists the shared objects containing a given field that are
	    improperly published.  Improperly published objects are accessed by
	    more than one thread while the object is under construction.  This
	    generally happens when a constructor passes its
	    <varname>this</varname> reference to another object during
	    construction.  The number of reads/writes and the size of the lock
	    set is also shown.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Field Object</entry>
		  <entry>An object identifier</entry>
		</row>

		<row>
		  <entry>Reads</entry>
		  <entry>The read count of the field on this object</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of the field on this object</entry>
		</row>

		<row>
		  <entry>Reads Under Construction</entry>
		  <entry>The read count of the field on this object while it was
		  being initialized</entry>
		</row>
		
		<row>
		  <entry>Writes Under Construction</entry>
		  <entry>The write count of the field on this object while it was
		  being initialized</entry>
		</row>

		<row>
		  <entry>Lock Set Size</entry>
		  <entry>The number of locks commonly held when each access is
		  made to the field on this object</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What are the individual instances of this non-static field?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists the shared objects containing a given field.  The number of
	    reads/writes and the size of the lock set is also shown.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Field Object</entry>
		  <entry>An object identifier</entry>
		</row>

		<row>
		  <entry>Reads</entry>
		  <entry>The read count of the field on this object</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of the field on this object</entry>
		</row>

		<row>
		  <entry>Reads Under Construction</entry>
		  <entry>The read count of the field on this object while it was
		  being initialized</entry>
		</row>
		
		<row>
		  <entry>Writes Under Construction</entry>
		  <entry>The write count of the field on this object while it was
		  being initialized</entry>
		</row>

		<row>
		  <entry>Lock Set Size</entry>
		  <entry>The number of locks commonly held when each access is
		  made to the field on this object</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What are the lock events for this lock graph edge?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the lock events that contribute to a particular edge of
	    the lock cycle, and where they occur in the program.  Clicking on a
	    lock event will open the line that acquired it in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>LockEvent</entry>
		  <entry>A lock event identifier</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (non-static) are shared?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all the non-static fields accessed by more than one thread.
	    Provides some summary information about the number of reads and
	    writes of each field, as well as how many shared objects are created
	    that contain this field.  Clicking on a field opens its
	    declaration in the code view.
	  </para>

	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Reads</entry>
		  <entry>The read count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Reads During Construction</entry>
		  <entry>The read count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Writes During Construction</entry>
		  <entry>The write count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Instances</entry>
		  <entry>The number of shared objects that contain this
		  field</entry>
		</row>

		<row>
		  <entry>Threads Involved</entry>
		  <entry>The number of threads involved in accessing all
		  shared instances of this field</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (non-static) have a lock set?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all the non-static fields accessed by more than one thread in
	    the program that have a lock set.  A lock set guarantees that the
	    field's data can not be invalidated by a race condition.  Provides
	    some summary information about the number of reads and writes of
	    each field, as well as how many shared objects are created that
	    contain this field.  Clicking on a field will open its declaration
	    in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Instances</entry>
		  <entry>The number of objects with a lock set on this field</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (non-static) have an empty lock set?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all the non-static fields accessed by more than one thread in
	    the program with an empty lock set.  An empty lock set means that
	    Flashlight's lock set analysis could not find a common lock held
	    each time this field is accessed.  Provides some summary information
	    about the number of reads and writes of each field, as well as how
	    many shared objects are created that contain this field.  Clicking
	    on a field will open its declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Instances</entry>
		  <entry>The number of objects with a lock set on this field</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (non-static, non-final) are shared?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all the non-static, non-final fields accessed by more than one
	    thread.  Provides some summary information about the number of reads
	    and writes of each field, as well as how many shared objects are
	    created that contain this field.  Clicking on a field will open its
	    declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Reads</entry>
		  <entry>The read count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Reads During Construction</entry>
		  <entry>The read count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Writes During Construction</entry>
		  <entry>The write count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Instances</entry>
		  <entry>The number of shared objects that contain this
		  field</entry>
		</row>

		<row>
		  <entry>Threads Involved</entry>
		  <entry>The number of threads involved in accessing all
		  shared instances of this field</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (static) are shared?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the static fields in the program accessed by more than
	    one thread, and the number of reads and writes made by each thread.
	    Clicking on a field will open its declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Read Count</entry>
		  <entry>The number of times this field was read in this thread</entry>
		</row>

		<row>
		  <entry>Write Count</entry>
		  <entry>The number of times this field was written in this thread </entry>
		</row>

		<row>
		  <entry>Threads Involved</entry>
		  <entry>The number of threads involved in accessing this resource </entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (static) have a lock set?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the static fields in the program accessed by more than
	    one thread that have a lock set, and the number of reads and writes
	    made by each thread.  A lock set guarantees that the field's data
	    cannot be invalidated by a race condition.  Clicking on a field will
	    open its declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock</entry>
		  <entry>The identifier of a lock in this field's lock set</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (static) have an empty lock set?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the static fields in the program accessed by more than
	    one thread that have an empty lock set, and the number of reads and
	    writes made by each thread.  An empty lock set means that
	    Flashlight's lock set analysis could not find a common lock held
	    each time this field is accessed.  Clicking on a field will open its
	    declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields (static, non-final) are shared?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the static, non-final fields in the program accessed by
	    more than one thread, and the number of reads and writes made by
	    each thread.  Clicking on a field will open its declarations in the
	    code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Read Count</entry>
		  <entry>The number of times this field was read in this thread</entry>
		</row>

		<row>
		  <entry>Write Count</entry>
		  <entry>The number of times this field was written in this thread </entry>
		</row>

		<row>
		  <entry>Threads Involved</entry>
		  <entry>The number of threads involved in accessing this resource </entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields are accessed by multiple threads during object construction?
	  </para>
	</question>
	<answer>
	  <para>
	    Fields that are accessed by more than one thread before their object
	    has finished construction run the risk of being seen in an
	    uninitialized state.  This query displays any fields that were
	    observed to be accessed by two or more threads before construction
	    ended.  Clicking on a field will open its declaration in the code
	    view.
	  </para>

	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Reads</entry>
		  <entry>The read count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of all shared instances of this
		  field</entry>
		</row>

		<row>
		  <entry>Reads During Construction</entry>
		  <entry>The read count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Writes During Construction</entry>
		  <entry>The write count of all shared instances of this
		  field made while the owning object was under
		  construction</entry>
		</row>

		<row>
		  <entry>Instances</entry>
		  <entry>The number of shared objects that contain this
		  field</entry>
		</row>

		<row>
		  <entry>Threads Involved</entry>
		  <entry>The number of threads involved in accessing all
		  shared instances of this field</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What fields are protected by this lock, and how often?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the fields that were accessed while this lock was held
	    and how often each was accessed with or without the lock being held.
	    Clicking on a field will open its declaration in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Times Held</entry>
		  <entry>The number of times the lock was held while this field
		  was accessed</entry>
		</row>

		<row>
		  <entry>Total Accesses</entry>
		  <entry>The total number of accesses made to this field</entry>
		</row>

		<row>
		  <entry>%</entry>
		  <entry>The proportion of times the lock was held to the total
		  number of field accesses, expressed as a percentage</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What kinds of objects are indirectly accessed by more than one thread?
	  </para>
	</question>
	<answer>
	  <para>
	    Shows all of the classes with objects that are indirectly accessed
	    by more than one thread, as well as how many threads call them and
	    how many accesses are actually made.  Flashlight can generate
	    indirect access events about an object whenever it is invoked with
	    or passed as a parameter to a particular method.  By default, it
	    does this for the collections and array manipulation methods in
	    <package>java.util</package> and
	    <classname>java.lang.System</classname>. For more information about
	    indirect accesses, see <xref linkend="flashlight-method-files" />.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Threads</entry>
		  <entry>The number of threads that indirectly access objects of this class</entry>
		</row>

		<row>
		  <entry>Accesses</entry>
		  <entry>The number of indirect accesses made to objects of this class</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What locks are contended for the longest time?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the locks in the program, in descending order of the
	    average amount of time a lock blocks a thread each time it is
	    acquired.  Locks with a high average block time usually indicate
	    high contention in part of your program, and may be a source of
	    slowdown.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>
		
		<row>
		  <entry morerows="3"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock</entry>
		  <entry>A lock identifier</entry>
		</row>

		<row>
		  <entry>Times Acquired</entry>
		  <entry>The number of times this lock was acquired</entry>
		</row>

		<row>
		  <entry>Total Block Time</entry>
		  <entry>The total amount of time that threads spent waiting for
		  this lock</entry>
		</row>

		<row>
		  <entry>Average Block Time</entry>
		  <entry>The average amount of time a thread waits before the
		  lock was acquired</entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What locks could potentially cause deadlock?
	  </para>
	</question>
	<answer>
	  <para>
	    Deadlocks can occur when two different threads in a program acquire
	    a set of locks in different order.  Flashlight tries to detect
	    potential deadlocks by constructing a directed graph where each edge
	    points to an acquired lock from a lock already held.  This query
	    shows all of the potential cycles in that graph.tem
	  </para>
	  <para>
	    For example, imagine that a program has locks 1, 2, and 3.  In
	    method <function>foo</function>, lock 1 is acquired, then 2, then 3.
	    In method <function>bar</function>, lock 3 is acquired, then 1, then
	    2.  If <function>foo</function> and <function>bar</function> are
	    called at the same time, foo may end up holding lock 1 and 2 while
	    bar holds lock 3.  Running this query will cause the above example
	    to show up as a cycle.  The figure below is an example of this type
	    of deadlock.
	  </para>
	  <figure id="query-deadlock-example">
	    <title>Example of a potential deadlock</title>
	    <mediaobject><imageobject><imagedata fileref="images/query-deadlock-example.png" /></imageobject></mediaobject>
	  </figure>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Cycle</emphasis> &#8594; <emphasis>LockHeld</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Lock Acquired</entry>
		  <entry>The lock acquired while the given lock is already held
		  in this component's cycle</entry>
		</row>

		<row>
		  <entry>Count</entry>
		  <entry>The number of times this lock was acquired while the
		  other was held</entry>
		</row>

		<row>
		  <entry>FirstTime</entry>
		  <entry>The first time this lock was acquired while the other
		  was held</entry>
		</row>

		<row>
		  <entry>LastTime</entry>
		  <entry>The last time this lock was acquired while the other
		  was held</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What instances of this class are indirectly accessed by more than one thread?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists the objects in this class called by more than one thread, and
	    gives a breakdown of the accesses made by each thread.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Object</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>
		
		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Accesses</entry>
		  <entry>The number of times this object was indirectly accessed
		  in this thread</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What is the lock trace for this lock event?
	  </para>
	</question>
	<answer>
	  <para>
	    Generates a trace of the lock acquisitions that were made leading up
	    to this lock event, from most to least recent.  Clicking on each
	    entry will open up the line that acquired that lock in the code
	    view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

              <spanspec spanname="full-header" namest="c1" nameend="c2"/>

              <tbody>
                <row>
                  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
                  <entry>Table</entry>
                </row>

                <row>
                  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
	          <entry>Lock</entry>
                  <entry>The lock acquired in this line of the trace</entry>
                </row>

                <row>
                  <entry>Package</entry>
                  <entry>The package this lock was acquired in</entry>
                </row>

		<row>
		  <entry>Class</entry>
		  <entry>The class this lock was acquired in</entry>
		</row>

		<row>
		  <entry>Line</entry>
		  <entry>The line number this lock was acquired at</entry>
		</row>
		
                <row>
                  <entry>Time</entry>
                  <entry>The time this lock was acquired</entry>
                </row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What is the stack trace for this access?
	  </para>
	</question>
	<answer>
	  <para>
	    Generates a stack trace of the method calls leading up to this field
	    access or method call, from most to least recent.  Clicking on each
	    line will open the method call in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

              <spanspec spanname="full-header" namest="c1" nameend="c2"/>

              <tbody>
                <row>
                  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
                  <entry>Table</entry>
                </row>

                <row>
                  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
                  <entry>Package</entry>
                  <entry>The package this method invocation or access occurred
                  in</entry>
                </row>

		<row>
		  <entry>Class</entry>
		  <entry>The class this method invocation or access occurred
		  in</entry>
		</row>

		<row>
		  <entry>Location</entry>
		  <entry>The location of this method invocation or access.  This
		  is generally the enclosing method</entry>
		</row>

		<row>
		  <entry>File</entry>
		  <entry>The name of the source file this method invocation or
		  access occurred in</entry>
		</row>


		<row>
		  <entry>Line</entry>
		  <entry>The line number this method invocation or access occurred at</entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What is the stack trace for this lock acquisition?
	  </para>
	</question>
	<answer>
	  <para>
	    Generates a stack trace of the method calls leading up to this lock
	    acquisition, from most to least recent.  Clicking on each line will
	    open the method call in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

              <spanspec spanname="full-header" namest="c1" nameend="c2"/>

              <tbody>
                <row>
                  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
                  <entry>Table</entry>
                </row>

                <row>
                  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
                  <entry>Package</entry>
                  <entry>The package this method invocation or lock acquisition occurred
                  in</entry>
                </row>

		<row>
		  <entry>Class</entry>
		  <entry>The class this method invocation or lock acquisition
		  occurred in</entry>
		</row>

		<row>
		  <entry>File</entry>
		  <entry>The name of the source file this method invocation or
		  lock acquisition occurred in</entry>
		</row>

		<row>
		  <entry>Location</entry>
		  <entry>The location of this method invocation, or lock
		  acquisition.  This is generally the enclosing method</entry>
		</row>

		<row>
		  <entry>Line</entry>
		  <entry>The line number this method invocation or lock
		  acquisition occurred at</entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    What threads read and write this field?
	  </para>
	</question>
	<answer>
	  <para>
	    Shows the number of reads and writes each thread that accesses this
	    field makes.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Reads</entry>
		  <entry>The read count of this field</entry>
		</row>

		<row>
		  <entry>Writes</entry>
		  <entry>The write count of this field</entry>
		</row>

		<row>
		  <entry>Reads During Construction</entry>
		  <entry>The read count of this field made while the owning
		  object was under construction</entry>
		</row>

		<row>
		  <entry>Writes During Construction</entry>
		  <entry>The write count of this field made while the owning
		  object was under construction</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    When and by what threads was this field accessed?
	  </para>
	</question>
	<answer>
	  <para>
	    Shows each field access and what thread it happened in, ordered by
	    the time it occurred.  Accesses marked as being 'Under Construction'
	    happened while the object was being initialized.  Clicking on an
	    access will open the relevant line in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Field</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Time</entry>
		  <entry>The time this field access occurred</entry>
		</row>

		<row>
		  <entry>Access</entry>
		  <entry>The type of field access, either a Read or a Write</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    When and by what threads was this object indirectly accessed?
	  </para>
	</question>
	<answer>
	  <para>
	    Shows each call to this object and what thread it happened in,
	    ordered by the time it occurred.  Clicking on an access will open
	    the relevant line in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Table</entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Thread</entry>
		  <entry>The thread this object was indirectly accessed in</entry>
		</row>

		<row>
		  <entry>Time</entry>
		  <entry>The time this object was indirectly accessed</entry>
		</row>
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    When do we acquire a lock here?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists each time and by what thread the program acquires a lock at
	    this line in the code.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis> &#8594; <emphasis>Time</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Locks Already Held</entry>
		  <entry>The number of locks already held when we acquire the
		  lock at this time</entry>
		</row>

		<row>
		  <entry>ThreadName</entry>
		  <entry>The name of the thread we acquire the lock in</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where are fields accessed during this particular lock acquisition?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program where a field is held during
	    this and only this time the lock is acquired.  Clicking on a line
	    will open it in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where are fields accessed while this lock is held?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program where a field is accessed
	    while this lock is held.  Clicking on a line will open it in the
	    code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where does a thread hold a lock and acquire another?
	  </para>
	</question>
	<answer>
	  <para>
	    Provides an overview of all the locking interaction in the program.
	    Lists every line of code where a lock is acquired while already
	    holding at least one lock.  Next to each line is listed the most
	    locks the program ever holds at this point.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Most Locks Already Held</entry>
		  <entry>The maximum number of locks already held when we
		  acquire the lock at this point</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where is this field accessed by the program?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program that access this field at
	    some point in time.  Clicking on a line will open up the field
	    access in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where is this field accessed while this lock is held?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program that access this field while
	    the given lock is being held.  Clicking on a line will open up the
	    field access in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where is this field accessed while this lock is not held?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program that access this field while
	    a given lock is not held.  Clicking on a line will open up the field
	    access in the code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>
		
	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Where is this lock acquired by the program?
	  </para>
	</question>
	<answer>
	  <para>
	    Lists all of the places in the program that acquire this lock at
	    some point in time, and how this lock was acquired (either as an
	    intrinsic lock with <code>synchronized</code>, or as a
	    <package>java.util.concurrent</package>
	    <classname>ReadWriteLock</classname> or
	    <classname>Lock</classname>). Clicking on a line will open it in the
	    code view.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>Type</entry>
		  <entry>The type of lock access, either Intrinsic,
		  java.util.concurrent Lock, java.util.concurrent
		  ReadWriteLock.readLock(), or java.util.concurrent
		  ReadWriteLock.writeLock()</entry>
		</row>

		<row>
		  <entry>ThreadName</entry>
		  <entry>The name of the thread we acquire the lock in</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
      <qandaentry>
	<question>
	  <para>
	    Which threads and what code contend for this lock?
	  </para>
	</question>
	<answer>
	  <para>
	    Shows all of the locations and threads that contend for this lock,
	    organized first by code location and then by thread.  Some entries
	    in this query may appear to be duplicates, but actually have
	    different stack traces.  For each entry, the amount of time that the
	    thread blocks and the number of times the lock is acquired is
	    listed.
	  </para>
	  <informaltable>
	    <tgroup cols="3">
	      <colspec colnum="1" colname="c1" colwidth="1*" align="right"/>
	      <colspec colnum="2" colname="c2" colwidth="1*" align="right"/>
	      <colspec colnum="3" colname="c3" colwidth="6*" align="left"/>

	      <spanspec spanname="full-header" namest="c1" nameend="c2"/>

	      <tbody>
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Displayed as</emphasis></entry>
		  <entry>Tree-Table</entry>
		</row>
		
		<row>
		  <entry spanname="full-header"><emphasis role="strong">Tree Structure</emphasis></entry>
		  <entry><emphasis>Package</emphasis> &#8594; <emphasis>Class</emphasis> &#8594; <emphasis>Line</emphasis> &#8594; <emphasis>Thread</emphasis></entry>
		</row>

		<row>
		  <entry morerows="5"><emphasis role="strong">Columns</emphasis></entry>
		  <entry>BlockTime</entry>
		  <entry>The amount of time the thread spends blocking while
		  acquiring this lock</entry>
		</row>

		<row>
		  <entry>Times Acquired</entry>
		  <entry>The number of times the lock is acquired in this thread</entry>
		</row>

		<row>
		  <entry>Total Block Time</entry>
		  <entry>The total amount of time spent blocking while the
		  resource waits to acquire this lock</entry>
		</row>

		<row>
		  <entry>Average Block Time</entry>
		  <entry>The average amount of time this thread spends waiting
		  for this lock</entry>
		</row>

	      </tbody>
	    </tgroup>
	  </informaltable>
	</answer>
      </qandaentry>
    </qandaset>
  </sect2>
</sect1>
